(this.webpackJsonpyearone_takehome=this.webpackJsonpyearone_takehome||[]).push([[0],{32:function(e,t,n){},34:function(e,t,n){},56:function(e,t,n){"use strict";n.r(t);var i=n(5),a=n.n(i),c=n(26),s=n.n(c),r=(n(32),n(11)),o=n.n(r),l=n(12),u=n(10),d=(n(34),n.p+"static/media/logo.6ce24c58.svg"),j=n(13),b=n.n(j),p={apiKey:"16ff66b6a4fe255819100131f3826554",config:{apiKey:"AIzaSyCbIlRaUHjWYWfWseREHjGYQu8sMOQdnu0",authDomain:"yearone-takehome.firebaseapp.com",databaseURL:"https://yearone-takehome.firebaseio.com",projectId:"yearone-takehome",storageBucket:"yearone-takehome.appspot.com",messagingSenderId:"113496552704405171831"}},v=n(2);var h=function(e){var t=e.movie,n=t.title,i=t.poster,a=t.overview,c=e.idx,s=e.setSingleMovie,r=e.movies;return Object(v.jsxs)("div",{className:"singleMoviePreviewContainer",onClick:function(){return s(r[c])},children:[Object(v.jsx)("img",{src:i?"https://image.tmdb.org/t/p/original/".concat(i):"https://image.shutterstock.com/image-vector/no-image-available-vector-illustration-260nw-744886198.jpg",width:"100",alt:"movie poster",className:"posterPreview"}),Object(v.jsxs)("div",{className:"titleAboutConatiner",children:[Object(v.jsx)("h3",{className:"titlePreview",children:n}),Object(v.jsx)("p",{className:"overviewPreview",children:a})]})]},c)},m=n(16);n(53),n(58),n(57);m.a.initializeApp(p.config);var f=m.a.firestore().collection("movies");var g=function(e){var t=e.movie,n=e.setMovie,a=Object(i.useState)(""),c=Object(u.a)(a,2),s=c[0],r=c[1],d=Object(i.useState)(0),j=Object(u.a)(d,2),h=j[0],m=j[1],g=Object(i.useState)(0),O=Object(u.a)(g,2),x=O[0],k=O[1],y=Object(i.useState)(!1),w=Object(u.a)(y,2),N=w[0],C=w[1];return Object(i.useEffect)((function(){(function(){var e=Object(l.a)(o.a.mark((function e(){var n,i,a,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="https://api.themoviedb.org/3/movie/".concat(t.id,"/credits?api_key=").concat(p.apiKey,"&append_to_response=credits"),e.next=3,b.a.get(n);case 3:i=e.sent,a=i.data,(c=a.crew.find((function(e){return"Director"===e.job})))&&r(c.name);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t]),Object(i.useEffect)((function(){f.doc("".concat(t.id)).get().then((function(e){e.exists?(m(e.data().likes),k(e.data().dislikes),C(!0)):f.doc("".concat(t.id)).set({likes:0,dislikes:0}).then((function(){console.log("new movie created"),C(!0)}))})).catch((function(e){console.log("error: ",e)}))}),[t.id]),Object(i.useEffect)((function(){N&&f.doc("".concat(t.id)).update({likes:h,dislikes:x})}),[h,x,t.id,N]),Object(v.jsx)("div",{children:Object(v.jsxs)("div",{id:"singleMovieContainer",children:[Object(v.jsx)("button",{type:"button",onClick:function(){return n(null)},className:"exitSingleMovieButton",children:"X"}),Object(v.jsx)("img",{className:"singleMoviePoster",src:t.poster?"https://image.tmdb.org/t/p/original/".concat(t.poster):"https://image.shutterstock.com/image-vector/no-image-available-vector-illustration-260nw-744886198.jpg",alt:"movie poster"}),Object(v.jsxs)("div",{id:"singleMovieContentContainer",children:[Object(v.jsx)("h1",{className:"singleMovieTitle",children:t.title}),Object(v.jsx)("h3",{children:s.length?"Directed by ".concat(s):"Director not listed"}),Object(v.jsx)("p",{className:"singleMovieReleaseYear",children:t.releaseDate?"Released ".concat(t.releaseDate):"Release date unknown"}),Object(v.jsxs)("div",{className:"ratingsContainer",children:[Object(v.jsxs)("div",{className:"feedbackContainer",children:[Object(v.jsx)("button",{type:"button",onClick:function(){return m(h-1)},disabled:!N,className:"ratingsButton",children:"-"}),Object(v.jsxs)("span",{className:"ratingsSpan",children:["likes: ",h]}),Object(v.jsx)("button",{type:"button",onClick:function(){return m(h+1)},disabled:!N,className:"ratingsButton",children:"+"})]}),Object(v.jsxs)("div",{className:"feedbackContainer",children:[Object(v.jsx)("button",{type:"button",onClick:function(){return k(x-1)},disabled:!N,className:"ratingsButton",children:"-"}),Object(v.jsxs)("span",{className:"ratingsSpan",children:["dislikes: ",x]}),Object(v.jsx)("button",{type:"button",onClick:function(){return k(x+1)},disabled:!N,className:"ratingsButton",children:"+"})]})]}),Object(v.jsx)("p",{className:"singleMovieOverview",children:t.overview})]})]})})};var O=function(){var e=Object(i.useState)([]),t=Object(u.a)(e,2),n=t[0],a=t[1],c=Object(i.useState)(""),s=Object(u.a)(c,2),r=s[0],j=s[1],m=Object(i.useState)(null),f=Object(u.a)(m,2),O=f[0],x=f[1];return Object(i.useEffect)((function(){var e=function(){var e=Object(l.a)(o.a.mark((function e(){var t,n,i,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(null),t="https://api.themoviedb.org/3/search/movie?api_key=".concat(p.apiKey,"&language=en-US&query=").concat(r,"&include_adult=false"),e.next=4,b.a.get(t);case 4:n=e.sent,i=n.data,(c=i.results.reduce((function(e,t){return"en"===t.original_language&&e.push({id:t.id,title:t.title,poster:t.poster_path,overview:t.overview,popularity:t.popularity}),e}),[])).sort((function(e,t){return t.popularity-e.popularity})),a(c);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();r.length?e():a([])}),[r]),Object(v.jsxs)("div",{className:"App",children:[Object(v.jsx)("table",{className:"titleBar",children:Object(v.jsx)("tbody",{children:Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{children:Object(v.jsx)("img",{width:"50",src:d,alt:"atom"})}),Object(v.jsx)("td",{children:Object(v.jsx)("h3",{style:{color:"#fff"},children:"Movie DB Search"})})]})})}),Object(v.jsx)("form",{className:"searchBarForm",children:Object(v.jsx)("input",{type:"text",className:"searchBarInput",placeholder:"Enter movie name",value:r,onChange:function(e){return j(e.target.value)}})}),O?Object(v.jsx)(g,{movie:O,setMovie:x}):n.map((function(e,t){return Object(v.jsx)(h,{movie:e,idx:t,setSingleMovie:x,movies:n})}))]})},x=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,59)).then((function(t){var n=t.getCLS,i=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),i(e),a(e),c(e),s(e)}))};s.a.render(Object(v.jsx)(a.a.StrictMode,{children:Object(v.jsx)(O,{})}),document.getElementById("root")),x()}},[[56,1,2]]]);
//# sourceMappingURL=main.0c73cfe9.chunk.js.map